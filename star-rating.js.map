{"version":3,"sources":["webpack:///webpack/bootstrap 7d5bb92ebc5047e829a9","webpack:///./src/star-rating.js","webpack:///./src/vars.js","webpack:///./src/helpers.js"],"names":[],"mappings":"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","file":"star-rating.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7d5bb92ebc5047e829a9\n **/","import {exists, elementTemplate, starTemplate} from \"./helpers\";\nimport { SIZE, ELEMENT_STYLE, STAR_STYLE, SELECTED_IMG_BKG, BASE_IMG_BKG, MAX_VALUE} from \"./vars\";\n\nexport class StarRating extends HTMLElement {\n\n    createdCallback(){\n        this._attrs = /(size|maxvalue|src)/i;\n        Object.defineProperty(this, \"value\", { value: 0, writable: true });\n    }\n\n    attributeChangedCallback(name, oldVal, newVal) {\n        if(this._attrs.test(name)){\n            this._update();\n            this._toggleStates(newVal ||  0);\n        }\n    }\n\n    attachedCallback() {\n        this._root = this._hasShadow() ? this.createShadowRoot() : this;\n        this._update();\n    }\n\n    reset(){\n        if(this.value !== 0) {\n            this._setValue(0);\n            this._querySelectorAllStars(removedSelectedState);\n            this.dispatchEvent(this._ratingUpdatedEvent());\n        }\n\n        function removedSelectedState(item){\n            item.classList.remove('selected');\n            this._setStateFor(item, this._src()[0], this._size());\n        }\n\n        return this;\n    }\n\n    rate(value){\n        this._setValue(value);\n        this._toggleStates(value);\n        return this;\n    }\n\n    _setStateFor(item, starImg, size){\n      if(!this._hasShadow()){\n        item.style.backgroundImage = `url(${starImg})`;\n        item.style.width = size;\n        item.style.height = size;\n      }\n      return item;\n    }\n\n    _update(){\n        this._render();\n        this._bindEvents();\n    }\n\n        // TODO: Update this & relate style attr adjustments to use Shadow DOM &\n        // CSS Properties (doing this hack now to get browser support)\n\n    _renderStars(){\n      let starArr = [];\n      let maxValue = this._maxValue();\n      while(maxValue > 0){\n        starArr.push(maxValue);\n        maxValue--;\n      }\n      return starArr.map(starTemplate).join('');\n    }\n\n    _render(){\n        if(this._hasShadow()) {\n          // console.log(CSSTemplate(this._size(), this._src()) + this._renderStars());\n          this._root.innerHTML = elementTemplate(this._size(), this._src()) + this._renderStars();\n        } else{\n          this.setAttribute('style', StarRating._style(this._size(), this._src()).element());\n          this._root.innerHTML = this._renderStars();\n        }\n    }\n\n    _ratingUpdatedEvent(){\n        return new CustomEvent(\"ratingUpdated\", {\n            detail: {\n                value: this.value,\n                maxValue: this._maxValue()\n            }\n        });\n    }\n\n    _querySelectorAllStars(iterateFn){\n        let stars = this._root.querySelectorAll('.star');\n        [].forEach.call(stars, iterateFn, this);\n        return stars;\n    }\n\n    _bindEvents(){\n        this._querySelectorAllStars(bindClicks);\n\n        function bindClicks(item, indx){\n            updateEventHandlers(this, item, 'click', starHandler);\n\n            function starHandler(evt){\n                evt.preventDefault();\n                let selectedStars = this._root.querySelectorAll('.selected');\n\n                if(selectedStars.length === indx + 1 && evt.target.classList.contains('selected')){\n                    this.reset();\n                } else {\n                    this._toggleStates(indx);\n                }\n            }\n        }\n\n        function updateEventHandlers(starRating, element, evt, handler){\n            element.removeEventListener(evt, handler.bind(starRating));\n            element.addEventListener(evt, handler.bind(starRating));\n        }\n\n    }\n\n    _updateStar(item, index){\n        return this._hasShadow() ? this._toggleStates(index) : item.setAttribute('style', `${StarRating._style(this._size(), this._src()[0]).star()};`);\n    }\n\n    _toggleStates(index){\n        let _srcs = this._src();\n        let stars = this._querySelectorAllStars(toggleStates);\n        let size = this._size();\n        this.dispatchEvent(this._ratingUpdatedEvent());\n\n        function toggleStates(item, indx){\n            let isInRange = indx <= index;\n            item.classList[isInRange ? 'add' : 'remove']('selected');\n            this._setValue(index + 1);\n            this._setStateFor(item, (isInRange ? _srcs[0] : _srcs[1]), size);\n        }\n    }\n\n    _src(){\n        let _src = this.getAttribute('src');\n        return exists(_src) ? _src.split(/(\\ *),{1}(\\ *)/).filter(filterSrc) : StarRating._sources();\n\n        function filterSrc(item){\n          if(!(/^(data).*(base64)$/.test(item)) && item.trim() !== ''){\n            return item;\n          }\n        }\n    }\n\n    _maxValue(){\n        let maxValue = parseInt(this.getAttribute('maxValue'), 10);\n        return exists(maxValue) && !isNaN(maxValue) ? maxValue : MAX_VALUE;\n    }\n\n    _size() {\n        let sizeAttr = this.getAttribute('size');\n        return exists(sizeAttr) ? sizeAttr : SIZE;\n    }\n\n    _setValue(val){\n        this.setAttribute(\"value\", val);\n        return this.value = val;\n    }\n\n    _hasShadow(){\n        return \"createShadowRoot\" in this;\n    }\n\n    static _sources(){\n      return [ BASE_IMG_BKG , SELECTED_IMG_BKG ];\n    }\n\n    static _style(size, starImg){\n\n        return {\n            element: function(){\n                return ELEMENT_STYLE;\n            },\n\n            star: function(starImg, size){\n                return  STAR_STYLE + `height: ${size};width: ${size};background-image: url(${starImg});`;\n            }\n\n        }\n\n    }\n\n}\n\n\n\ndocument.registerElement(\"star-rating\", StarRating);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/star-rating.js\n **/","export default function Vars(){\n\n    return {\n      size: SIZE,\n      maxValue: MAX_VALUE,\n      icon: {\n        base: BASE_IMG_BKG,\n        selected: SELECTED_IMG_BKG\n      },\n      styles: {\n        element: ELEMENT_STYLE,\n        star: STAR_STYLE\n      },\n      templates: {\n        css: elementTemplate,\n        html: starTemplate\n      }\n\n    };\n}\n\nexport const SIZE             = \"36px\";\nexport const MAX_VALUE        = 5;\nexport const BASE_IMG_BKG     = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjQ0NDQ0NDIiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik05IDExLjNsMy43MSAyLjctMS40Mi00LjM2TDE1IDdoLTQuNTVMOSAyLjUgNy41NSA3SDNsMy43MSAyLjY0TDUuMjkgMTR6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDE4djE4SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg==';\nexport const SELECTED_IMG_BKG = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRjFDNDBGIiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik05IDExLjNsMy43MSAyLjctMS40Mi00LjM2TDE1IDdoLTQuNTVMOSAyLjUgNy41NSA3SDNsMy43MSAyLjY0TDUuMjkgMTR6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDE4djE4SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg==';\nexport const ELEMENT_STYLE    = `display: flex;\n                                 display: -webkit-flex;\n                                 -webkit-align-items: center;\n                                 -ms-align-items: center;\n                                 -moz-align-items: center;\n                                 align-items: center;\n                                 -webkit-justify-content: center;\n                                 -ms-justify-content: center;\n                                 -moz-justify-content: center;\n                                 justify-content: center;\n                                 width: 100%;`;\nexport const STAR_STYLE       = `outline: 0;\n                                 cursor: pointer;\n                                 background-color: rgba(255,255,255,0);\n                                 background-repeat: no-repeat;\n                                 background-position: center center;\n                                 background-size: cover;`\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/vars.js\n **/","export default function helpers(){\n  return {\n    exists: exists,\n    starTemplate: starTemplate,\n    elementTemplate: elementTemplate\n  };\n}\n\nexport function exists(testItem) {\n    return typeof testItem !== \"undefined\" && testItem !== null;\n}\n\nexport function starTemplate(){\n  return '<div class=\"star\"></div>';\n}\n\nexport function elementTemplate(size, starImgs){\n\n  return `<style>\n           :host {\n             display: flex;\n             -webkit-align-items: center;\n             -ms-align-items: center;\n             -moz-align-items: center;\n             align-items: center;\n             -webkit-justify-content: center;\n             -ms-justify-content: center;\n             -moz-justify-content: center;\n             justify-content: center;\n             width: 100%;\n           }\n\n           .star {\n              height: ${size};\n              width: ${size};\n              outline: 0;\n              cursor: pointer;\n              background: rgba(255,255,255,0) url(${starImgs[0]}) no-repeat center center;\n              background-size: cover;\n           }\n\n           .star.selected {\n             background-image: url(${starImgs[1]});\n           }\n\n        </style>`;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/helpers.js\n **/"],"sourceRoot":""}