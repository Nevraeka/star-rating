{"version":3,"sources":["webpack:///webpack/bootstrap 7b8547ad6fdf12c681e7","webpack:///./src/star-rating.js","webpack:///./src/helpers.js","webpack:///./src/vars.js"],"names":[],"mappings":"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","file":"star-rating.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7b8547ad6fdf12c681e7\n **/","import {exists, elementTemplate, starTemplate} from \"./helpers\";\nimport {SIZE, ELEMENT_STYLE, STAR_STYLE, SELECTED_IMG_BKG, BASE_IMG_BKG, MAX_VALUE} from \"./vars\";\n\n/*\n\n A vanilla web component that provides a number based rating value\n\n ##### Examples\n <star-rating></star-rating>\n <star-rating maxvalue=\"10\"></star-rating>\n <star-rating size=\"2em\"></star-rating>\n <star-rating src=\"/path/to/default-image-state, /path/to/selected-image-state\"></star-rating>\n @demo\n @element star-rating\n @author Erik Isaksen\n\n */\nexport class StarRating extends HTMLElement {\n\n    createdCallback() {\n        this._attrs = /(size|maxvalue|src)/i;\n        Object.defineProperty(this, \"value\", { value: 0, writable: true});\n    }\n\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (this._attrs.test(name)) {\n            this._update();\n            this._toggleStates(newVal || 0);\n        }\n        if(name == 'value'){\n            this.value = newVal;\n        }\n\n        // this.addEventListener('keyup', this.applyKeyAccess.bind(this));\n    }\n\n    attachedCallback() {\n        this._root = this._hasShadow() ? this.createShadowRoot() : this;\n        this._update();\n    }\n\n    reset() {\n        if (this.value !== 0) {\n            this._setValue(0);\n            this._allAnd(removedSelectedState);\n            this.dispatchEvent(this._ratingUpdatedEvent());\n        }\n\n        function removedSelectedState(item) {\n            item.classList.remove('selected');\n            this._setStateFor(item, this._src()[0], this._size());\n        }\n\n        return this;\n    }\n\n    rateAs(value) {\n        const max = this._maxValue();\n        let _value =  value <= 1 ? 0 : value >= max ? max - 1 : value -1;\n        this._setValue(_value);\n        this._toggleStates(_value);\n        return this;\n    }\n\n    _setStateFor(item, starImg, size) {\n        if (!this._hasShadow()) {\n            item.style.backgroundImage = `url(${starImg})`;\n            item.style.width = size;\n            item.style.height = size;\n        }\n        return item;\n    }\n\n    _update() {\n        this._render();\n        this._applyEvents();\n    }\n\n    // TODO: Update this & relate style attr adjustments to use Shadow DOM &\n    // CSS Properties (doing this hack now to get browser support)\n\n    _renderStars() {\n        let starArr = [];\n        let maxValue = this._maxValue();\n\n        while (maxValue > 0) {\n            starArr.push(maxValue);\n            maxValue--;\n        }\n        return starArr.map(starTemplate).join('');\n    }\n\n    _render() {\n        if (this._hasShadow()) {\n            this._root.innerHTML = elementTemplate(this._size(), this._src()) + this._renderStars();\n        } else {\n            this.setAttribute('style', StarRating._style(this._size(), this._src()).element());\n            this._root.innerHTML = this._renderStars();\n        }\n    }\n\n    _ratingUpdatedEvent() {\n        return new CustomEvent(\"ratingUpdated\", {\n            detail: {\n                value: this.value,\n                maxValue: this._maxValue()\n            }\n        });\n    }\n\n    _selected(){\n       return this._root.querySelectorAll('.selected');\n    }\n\n    _allAnd(iterateFn) {\n        return [].forEach.call(this._root.querySelectorAll('.star'), iterateFn, this);\n    }\n\n    _indexPlusOneEqualsCurrentValue(target, indx){\n        return this._selected().length === indx + 1 && target.classList.contains('selected');\n    }\n\n\n\n    _applyDOMEvents(item, indx) {\n          item.removeEventListener('click', starHandler.bind(this));\n          item.addEventListener('click', starHandler.bind(this));\n\n          function starHandler(evt) {\n              evt.preventDefault();\n              if (this._indexPlusOneEqualsCurrentValue(evt.target, indx)) {\n                  this.reset();\n              } else {\n                  this._toggleStates(indx);\n              }\n          }\n    }\n\n    _applyEvents() {\n        this._allAnd(this._applyDOMEvents);\n    }\n\n    _updateStar(item, index) {\n        return this._hasShadow() ? this._toggleStates(index) : item.setAttribute('style', `${StarRating._style(this._size(), this._src()[0]).star()};`);\n    }\n\n    _toggleStates(index) {\n        let _srcs = this._src();\n        let size = this._size();\n\n        this._allAnd(toggleStates);\n        this.dispatchEvent(this._ratingUpdatedEvent());\n\n        function toggleStates(item, indx) {\n            let isInRange = indx <= index;\n            item.classList[isInRange ? 'add' : 'remove']('selected');\n            this._setValue(index + 1);\n            this._setStateFor(item, (isInRange ? _srcs[0] : _srcs[1]), size);\n        }\n    }\n\n    _src() {\n        let _src = this.getAttribute('src');\n        return exists(_src) ? _src.split(/(\\ *),{1}(\\ *)/).filter(filterSrc) : StarRating._sources();\n\n        function filterSrc(item) {\n            if (!(/^(data).*(base64)$/.test(item)) && item.trim() !== '') {\n                return item;\n            }\n        }\n    }\n\n    _maxValue(val) {\n        let maxValue = parseInt(val ? val : this.getAttribute('maxvalue'), 10);\n        return exists(maxValue) && !isNaN(maxValue) ? maxValue : MAX_VALUE;\n    }\n\n    _size() {\n        let sizeAttr = this.getAttribute('size');\n        return exists(sizeAttr) ? sizeAttr : SIZE;\n    }\n\n    _setValue(val) {\n        this.setAttribute(\"value\", val);\n        return this.value = val;\n    }\n\n    _hasShadow() {\n        return \"createShadowRoot\" in this;\n    }\n\n    static _sources() {\n        return [BASE_IMG_BKG, SELECTED_IMG_BKG];\n    }\n\n    static _style(size, starImg) {\n\n        return {\n            element: function () {\n                return ELEMENT_STYLE;\n            },\n\n            star: function (starImg, size) {\n                return STAR_STYLE + `height: ${size};width: ${size};background-image: url(${starImg});`;\n            }\n\n        }\n\n    }\n\n}\n\n\ndocument.registerElement(\"star-rating\", StarRating);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/star-rating.js\n **/","export default function helpers(){\n  return {\n    exists:          exists,\n    starTemplate:    starTemplate,\n    elementTemplate: elementTemplate\n  };\n}\n\nexport function exists(testItem) {\n    return typeof testItem !== \"undefined\" && testItem !== null;\n}\n\nexport function starTemplate(){\n  return '<div tabindex=\"0\" class=\"star\"></div>';\n}\n\nexport function elementTemplate(size, starImgs){\n\n  return `<style>\n           :host {\n             display: flex;\n             -webkit-align-items: center;\n             -ms-align-items: center;\n             -moz-align-items: center;\n             align-items: center;\n             -webkit-justify-content: center;\n             -ms-justify-content: center;\n             -moz-justify-content: center;\n             justify-content: center;\n             width: 100%;\n             outline-width: 1px;\n           }\n\n           .star {\n              height: ${size};\n              width: ${size};\n              outline: 0;\n              cursor: pointer;\n              background: rgba(255,255,255,0) url(${starImgs[0]}) no-repeat center center;\n              background-size: cover;\n           }\n\n           .star.selected {\n             background-image: url(${starImgs[1]});\n           }\n\n        </style>`;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/helpers.js\n **/","export default function Vars(){\n\n    return {\n      size: SIZE,\n      maxValue: MAX_VALUE,\n      icon: {\n        base:     BASE_IMG_BKG,\n        selected: SELECTED_IMG_BKG\n      },\n      styles: {\n        element: ELEMENT_STYLE,\n        star:    STAR_STYLE\n      },\n      templates : {\n        css:  elementTemplate,\n        html: starTemplate\n      }\n\n    };\n}\n\nexport const SIZE             = \"36px\";\nexport const MAX_VALUE        = 5;\nexport const BASE_IMG_BKG     = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjQ0NDQ0NDIiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik05IDExLjNsMy43MSAyLjctMS40Mi00LjM2TDE1IDdoLTQuNTVMOSAyLjUgNy41NSA3SDNsMy43MSAyLjY0TDUuMjkgMTR6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDE4djE4SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg==';\nexport const SELECTED_IMG_BKG = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRjFDNDBGIiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik05IDExLjNsMy43MSAyLjctMS40Mi00LjM2TDE1IDdoLTQuNTVMOSAyLjUgNy41NSA3SDNsMy43MSAyLjY0TDUuMjkgMTR6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDE4djE4SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg==';\nexport const ELEMENT_STYLE    = `display: flex;\n                                 display: -webkit-flex;\n                                 -webkit-align-items: center;\n                                 -ms-align-items: center;\n                                 -moz-align-items: center;\n                                 align-items: center;\n                                 -webkit-justify-content: center;\n                                 -ms-justify-content: center;\n                                 -moz-justify-content: center;\n                                 justify-content: center;\n                                 width: 100%;`;\nexport const STAR_STYLE       = `outline: 0;\n                                 cursor: pointer;\n                                 background-color: rgba(255,255,255,0);\n                                 background-repeat: no-repeat;\n                                 background-position: center center;\n                                 background-size: cover;`\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/vars.js\n **/"],"sourceRoot":""}